<!-- templates/index.html -->
{% extends "index.html" %}
{% block title %}Subir y Visualizar Docentes{% endblock %}
{% block bloque %}
<h2>Subir archivo XML de Docentes</h2>
<form method="POST" action="/insertar" enctype="multipart/form-data">
    <input type="file" name="file" accept=".xml, .xlsx, .csv">
    <button type="submit" class="btn btn-primary">Subir</button>
</form>

{% if docentes %}
<h2>Datos de los Docentes</h2>

<form action="/insertar_docente" method="post">
    <table class="table">
        <thead>
            <tr>
                <th>Semestre</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Correo</th>
                <th>Dedicación</th>
                <th>Teléfono</th>
                <th>Horas Disponibles</th>
                <th>Editar</th>
            </tr>
        </thead>
        <tbody>
            {% for docente in docentes %}
            <tr>
                <td><input type="text" class="form-control-plaintext" name="semestre[]" value="{{ docente.semestre }}"
                        class="td"></td>
                <td><input type="text" class="form-control-plaintext" name="nombre[]" value="{{ docente.nombre }}"
                        class="td"></td>
                <td><input type="text" class="form-control-plaintext" name="apellido[]" value="{{ docente.apellido }}">
                </td>
                <td><input type="text" class="form-control-plaintext" name="correo[]" value="{{ docente.correo }}"></td>
                <td><input type="text" class="form-control-plaintext" name="dedicacion[]"
                        value="{{ docente.dedicacion }}"></td>
                <td><input type="text" class="form-control-plaintext" name="telefono[]" value="{{ docente.telefono }}">
                </td>
                <td><input type="text" class="form-control-plaintext" name="hora_disponible[]"
                        value="{{ docente.hora_disponible }}"></td>
                <td>
                    <button type="button" class="btn btn-warning" data-toggle="modal"
                        data-target="#editModal-{{ loop.index }}">
                        Editar
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" class="btn btn-primary">Insertar Todos</button>
</form>


{% for docente in docentes %}
<div class="modal fade" id="editModal-{{ loop.index }}" tabindex="-1" role="dialog"
    aria-labelledby="editModalLabel-{{ loop.index }}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel-{{ loop.index }}">Editar Docente</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="post" action="{{ url_for('update_docente') }}">
                    <input type="hidden" name="index" value="{{ loop.index0 }}">

                    <div class="form-group">
                        <label>Semestre</label>
                        <input type="text" class="form-control" name="semestre" value="{{ docente.semestre }}">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" class="form-control" name="nombre" value="{{ docente.nombre }}">
                    </div>
                    <div class="form-group">
                        <label>Apellido</label>
                        <input type="text" class="form-control" name="apellido" value="{{ docente.apellido }}">
                    </div>
                    <div class="form-group">
                        <label>Correo</label>
                        <input type="text" class="form-control" name="correo" value="{{ docente.correo }}">
                    </div>
                    <div class="form-group">
                        <label>Dedicación</label>
                        <input type="text" class="form-control" name="dedicacion" value="{{ docente.dedicacion }}">
                    </div>
                    <div class="form-group">
                        <label>Teléfono</label>
                        <input type="text" class="form-control" name="telefono" value="{{ docente.telefono }}">
                    </div>
                    <div class="form-group mb-0">
                        <label>Horas Disponibles</label>
                        <input type="text" class="form-control" name="hora_disponible"
                            value="{{ docente.horas_disponibles }}">
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endfor %}
{% else %}
<p>No hay datos para mostrar. Por favor, sube un archivo XML.</p>
{% endif %}
{% endblock %}


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>

</body>